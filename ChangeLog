2002-05-20  Koji Arai  <arai@fgsd.mt.nec.co.jp>

	* src/lharc.c (open_old_archive):  On MinGW, set binary stdin.

	* src/lhadd.c (temporary_to_new_archive_file): On MinGW, set binary stdout.

	* src/lha_macro.h: no define TMP_FILENAME_TEMPLATE in source.

	* configure.ac, configure.in, README.autoconf: be able to specify
	--with-tmp-file=no which meaning TMP_FILENAME_TEMPLATE is undefined.

	* src/lha.h: correct usage of mkstemp().
	On MinGW, opening file cannot be removed.

	* src/lhadd.c (build_temporary_file): ditto.

	* src/lharc.c (fatal_error): ditto.

2002-05-19  Koji Arai  <jca02266@nifty.ne.jp>

	* configure.in, configure.ac: added AM_C_PROTOTYPES, AC_C_CONST.
	no use AM_C_PROTOTYPES for the present.

	* config.h.in: ditto.

	* src/lharc.c (print_tiny_usage_and_exit): change credit.

	* src/lha_macro.h: put PLATFORM in a macro LHA_VERSION.

	* src/lharc.c (print_version): ditto.

	* configure.ac: use AC_CANONICAL_TARGET instead of AC_CANONICAL_HOST.

2002-05-19  Koji Arai  <jca02266@nifty.ne.jp>

	* released.

	* src/lharc.c (print_tiny_usage_and_exit): added credit.
	(print_version): print PLATFORM.

	* configure.ac, configure.in, config.h.in: define PLATFORM.

	* src/lharc.c (xstrdup): fix typo.

	* configure.ac: added for autoconf-2.53.

	* config.h.in: regenerate by autoconf-2.53.

	* src/lharc.c (find_files): MinGW has st_ino but always 0.

	* src/lharc.c (main): provisionally fix. set
	`get_filename_from_stdin' to false.

	* src/util.c (rename): use builtin rename on mingw32 (since have
	no link(2)).

	* src/lharc.c (main): use xrealloc().

	* src/lha_macro.h: specify "b" modifier always (for mingw32).

	* src/lharc.c: use xstrdup() instead of strdup().

	* src/lha_macro.h: ditto.

	* src/lha_macro.h: getuid(), chown(), kill() are provisionally
	defined as 0.

	* src/header.c: set `default_system_kanji_code' to Shift_JIS on mingw32.

	* src/lhadd.c (build_temporary_file): no use SIGHUP for mingw32.
	(build_backup_file): ditto.

	* src/lharc.c (interrupt): ditto.

	* src/lhext.c (extract_one): ditto.

	* src/lhext.c (make_parent_path): mkdir() has no 2nd argument on
	mingw32.

2002-05-18  Koji Arai  <jca02266@nifty.ne.jp>

	* lha_macro.h: define bcmp(), bzero(), bcopy() even if
	STDC_HEADERS is defined.

	* huf.c (alloc_buf): call fatal_error() when memory allocation failed
	instead of returning NULL.

	* lharc.c (main): use xmalloc().

	* util.c (copyfile): use xmalloc().

	* slide.c (encode_alloc): use xmalloc().

	* header.c (default_system_kanji_code): On HP-UX, use Shift_JIS as
	default kanji code.

# -*- shell-script -*-
message restore directory permission

echo -------------------------------------------------------------------

mkdir -p test-tmp1/test1/test2 &&
cp -r test-1 test-tmp1/test1/test2 &&
chmod 544 test-tmp1/test1/test2/test-1 &&
chmod 766 test-tmp1/test1/test2 &&
chmod 744 test-tmp1/test1 &&
chmod 544 test-tmp1
							check $? $LINENO

$lha c test-tmp1.lzh test-tmp1
							check $? $LINENO

$lha xw=test-tmp2 test-tmp1.lzh
							check $? $LINENO

diff -r test-tmp2/test-tmp1 test-tmp1
							check $? $LINENO

ls -ld test-tmp2/test-tmp1                    | grep '^dr-xr--r--' &&
ls -ld test-tmp2/test-tmp1/test1              | grep '^drwxr--r--' &&
ls -ld test-tmp2/test-tmp1/test1/test2        | grep '^drwxrw-rw-' &&
ls -ld test-tmp2/test-tmp1/test1/test2/test-1 | grep '^dr-xr--r--'
							check $? $LINENO
